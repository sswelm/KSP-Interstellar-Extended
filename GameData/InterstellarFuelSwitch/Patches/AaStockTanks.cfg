// Conversion of Squad tanks to IFS versions

@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!RESOURCE[MonoPropellant],!MODULE[ModuleTankManager],!MODULE[InterstellarFuelSwitch],!MODULE[FSfuelSwitch],!MODULE[ModuleB9PartSwitch],!MODULE[ModuleEnginesFX],!MODULE[ModuleEngines]]:NEEDS[InterstellarFuelSwitch&!ModularFuelTanks&!RealFuels&!ConfigurableContainers]:BEFORE[IFSTanks]
{
	%IFSTankVolume  = #$RESOURCE[LiquidFuel]/maxAmount$
	@IFSTankVolume += #$RESOURCE[Oxidizer]/maxAmount$
	@IFSTankVolume *= 5

	%IFSMtank = #$RESOURCE[LiquidFuel]/amount$
	@IFSMtank = #$RESOURCE[Oxidizer]/amount$
	@IFSMtank  *= -0.005
	@IFSMtank  += #$mass$

	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	%IFSTankType = CT
	%IFSTankTypeCDT = 1

	%IFScryoPower = #$IFSTankVolume$
	@IFScryoPower /= 800
}

//%IFSUnusedVisualObjects none

@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[MonoPropellant],!MODULE[ModuleTankManager],!MODULE[InterstellarFuelSwitch],!MODULE[FSfuelSwitch],!MODULE[ModuleB9PartSwitch],!MODULE[ModuleEnginesFX],!MODULE[ModuleEngines]]:NEEDS[InterstellarFuelSwitch&!ModularFuelTanks&!RealFuels&!ConfigurableContainers]:BEFORE[IFSTanks]
{
	%IFSTankVolume  = #$RESOURCE[LiquidFuel]/maxAmount$
	@IFSTankVolume *= 5

	%IFSMtank = #$RESOURCE[LiquidFuel]/amount$
	@IFSMtank  *= -0.005
	@IFSMtank  += #$mass$

	!RESOURCE[LiquidFuel] {}
	%IFSTankType = CT
	
	%IFScryoPower = #$IFSTankVolume$
	@IFScryoPower /= 800		// IFScryoPower: power requirement cryo storage
}

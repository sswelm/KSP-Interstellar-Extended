PART
{
name = KspiMIFEngine
module = Part
author = nli2work

rescaleFactor = 1

mesh = MICFEngine.mu

node_stack_top = 0.0, 0.083, 0.0, 0.0, 1.0, 0.0, 2
node_stack_bottom = 0.0, -3.380, 0.0, 0.0, -1.0, 0.0, 2

TechRequired = fusionRockets
entryCost = 180000
cost = 60000
category = Engine
subcategory = 0

title = #LOC_KSPIE_KspiMIFEngine_title		// #LOC_KSPIE_KspiMIFEngine_title = Magneto Inertial Fusion Engine
manufacturer = #LOC_KSPIE_manuf38		// #LOC_KSPIE_manuf38 = Ark Propulsions
description = #LOC_KSPIE_KspiMIFEngine_descr	// #LOC_KSPIE_KspiMIFEngine_descr = Magneto Inertial Fusion (MIF) describes a class of fusion devices which combine aspects of magnetic confinement fusion and inertial confinement fusion in an attempt to lower the cost of fusion devices. MIF uses magnetic fields to confine an initially warm, low-density plasma, then compresses that plasma to fusion conditions using an impulsive driver or "liner." This reactor cannot produce any electric power, instead it requires a relatively small amount of megajoule power, but far less than an pure electric engine would. Basicly this engine is a power multiplier. It convert electric power into high amount of thrust power. Becauuse Magneto Inertial Fusion (MIF) is a hybrid between fusion and electric propusion technology it bennefits from both technologies. Due to it low power requirements, this engine can be powered by a small/inefficient nuclear reactor or by large amount of solar arrays or beamed power.

// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
attachRules = 1,0,1,0,0

mass = 4
buoyancy = 0.1					// Water fill most of spaces
dragModelType = default
maximum_drag = 0.2
minimum_drag = 0.2
angularDrag = 2
crashTolerance = 6
breakingForce = 200
breakingTorque = 200
maxTemp = 2000
skinInternalConductionMult = 4.0
emissiveConstant = 0.88
radiatorMax = 0.35
stagingIcon = LIQUID_ENGINE
bulkheadProfiles = size3

tags = kspie interstellar magneto inertial fusion engine early propulsion

EFFECTS
{
	lithiumFlame
	{
     		AUDIO
		{
			channel = Ship
			clip = sound_rocket_spurts
			volume = 0.0 0.0
			volume = 1 1
			pitch = 0 0.1
			pitch = 1 0.1
			loop = true
		}
		MODEL_MULTI_PARTICLE
		{
			modelName = WarpPlugin/FX/interstellarLithiumExhaust
			transformName = thrustTransform
			emission = 0.0 0.0
			emission = 1.0 2.0
			speed = 0.0 10
			speed = 1.0 10
		}
	}
	engage
	{
		AUDIO
		{
			channel = Ship
			clip = sound_vent_soft
			volume = 1.0
			pitch = 2.0
			loop = false
		}
	}
	flameout
	{
		PREFAB_PARTICLE
		{
			prefabName = fx_exhaustSparks_flameout_2
			transformName = thrustTransform
			oneShot = true
		}
		AUDIO
		{
			channel = Ship
			clip = sound_explosion_low
			volume = 1.0
			pitch = 2.0
			loop = false
		}
	}
}

    	MODULE
    	{
		name = IntegratedInertialConfinementReactor

		reactorSpeedMult = 0 		// instant acceleration

		basePowerOutputMk1 = 200
		basePowerOutputMk2 = 355
		basePowerOutputMk3 = 632
		basePowerOutputMk4 = 1124
		basePowerOutputMk5 = 2000

		coreTemperatureMk1 = 50000
		coreTemperatureMk2 = 100000
		coreTemperatureMk3 = 200000
		coreTemperatureMk4 = 400000
		coreTemperatureMk5 = 800000

		fusionEnergyGainFactorMk1 = 100
		fusionEnergyGainFactorMk2 = 200
		fusionEnergyGainFactorMk3 = 300
		fusionEnergyGainFactorMk4 = 400
		fusionEnergyGainFactorMk5 = 500

		fuelEfficencyMk1 = 0.2
		fuelEfficencyMk2 = 0.2828427
		fuelEfficencyMk3 = 0.4
		fuelEfficencyMk4 = 0.5656854
		fuelEfficencyMk5 = 0.8

		fuelModeTechReqLevel2 = KspiMIFFuelUpgrade1
		fuelModeTechReqLevel3 = KspiMIFFuelUpgrade2
		fuelModeTechReqLevel4 = KspiMIFFuelUpgrade3
		fuelModeTechReqLevel5 = KspiMIFFuelUpgrade4

		upgradeTechReqMk2 = KspiMIFPowerUpgrade2
		upgradeTechReqMk3 = KspiMIFPowerUpgrade3
		upgradeTechReqMk4 = KspiMIFPowerUpgrade4
		upgradeTechReqMk5 = KspiMIFPowerUpgrade5

		minimumThrottle = 0.0
		upgradeCost = 200
		animName = e13
		consumeGlobal = false
		fuelEfficiency = 0.5
		upgradedFuelEfficiency = 0.5

		thermalPropulsionEfficiency = 0			// cannot use thermal propulsion
		plasmaPropulsionEfficiency = 1			// can use plasma nozzle
		chargedParticlePropulsionEfficiency = 0		// cannot use magnetic nozzle

		thermalEnergyEfficiency = 0			// cannot power a Thermal power generator
		plasmaEnergyEfficiency = 0			// cannot power a MHD generator		
		chargedParticleEnergyEfficiency = 0		// cannot power a Direct power generator

		neutronEmbrittlementLifepointsMax = 100
		neutronEmbrittlementDivider = 1e+9
		powerUpgradeTechReq = unifiedFieldTheory
		powerUpgradeTechMult = 1.8
		powerUpgradeCoreTempMult = 1
		bonusBufferFactor = 1
		reactorType = 8
		upgradedReactorType = 8
		partMass = 6
		radius = 2.5
		breedtritium = false
		supportedPropellantAtoms = 4
		fullPowerForNonNeutronAbsorbants = false
		disableAtZeroThrottle = true
		controlledByEngineThrottle = true
		limitedByMaxThermalNozzleIsp = false

		powerIsAffectedByLithium = false
		powerControlAffectsMaintenance = true

		electricPowerPriority = 4
    	}

    	MODULE
    	{
		name = ModuleEnginesWarp

		propellant1 = Lithium
		ratio1 = 1

		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1

		minThrust = 0
		maxThrust = 50
		heatProduction = 10

		engageEffectName = engage
		flameoutEffectName = flameout

		fxOffset = 0, 0, 3
		PROPELLANT
		{
			name = Lithium
        		ratio = 1
			DrawGauge = True
		}
		atmosphereCurve
 		{
   	 		key = 0 5143
  	 		key = 1 0
 		}
    	}

    	MODULE
    	{
		name = ThermalEngineController

		IspTempMultOffset = -0.2357269918213

		pulseAnimationName = enginePulse
		emiAnimationName = engineEMI

		recoveryAnimationDivider = 6
		delayedThrottleFactor = 0
		pulseDuration = 0.05

		isPlasmaNozzle = true
		isJet = false

		radius = 2.5
		exitArea = 30
		partMass = 6

		sootHeatDivider = 50
		sootThrustDivider = 150

		maxTemp = 2750
		showPartTemperature = false

		powerTrustMultiplier = 1
		powerTrustMultiplierJet = 1

		EffectNameLithium = lithiumFlame
		EffectNameNonLFO = hydrogenFlame

		limitedByMaxThermalNozzleIsp = false
   	}

	MODULE
	{
		name = ModuleJettison
		jettisonName = fairingL
		bottomNodeName = bottom
		isFairing = False
		jettisonedObjectMass = 0.1
		jettisonForce = 2
		jettisonDirection = -1 0 0
	}

	MODULE
	{
		name = ModuleJettison
		jettisonName = fairingR
		bottomNodeName = bottom
		isFairing = False
		jettisonedObjectMass = 0.1
		jettisonForce = 2
		jettisonDirection = 1 0 0
	}

	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 1
	}

	RESOURCE
	{
		name = ThermalPower
		amount = 0
		maxAmount = 5000
	}

	RESOURCE
	{
 		name = Megajoules
 		amount = 0
 		maxAmount = 100
	}

	RESOURCE
	{
		name = ChargedParticles
		amount = 0
		maxAmount = 5000
	}

	RESOURCE
	{
		name = WasteHeat
		amount = 0
		maxAmount = 900000
	}

	RESOURCE
	{
		name = Lithium
		amount = 200
		maxAmount = 200
	}

	RESOURCE
	{
		name = Deuterium
		amount = 1000
		maxAmount = 1000
	}

	MODULE
	{
		name = TweakScale
		type = stack_interstellar
		defaultScale = 2.5
		scaleFactors = 0.625, 0.95, 1.25, 1.875, 2.5, 3.75, 5, 7.5, 10, 15, 20, 30, 40
		techRequired = specializedFusionRockets, specializedFusionRocket, advFusionRockets, advFusionRockets, fusionRockets, fusionRockets, advFusionRockets, advFusionRockets, advFusionRockets, specializedFusionRockets, specializedFusionRockets, specializedFusionRockets, specializedFusionRockets
	}
}
